type UserPreferences @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  costSavingsPriority: String!
  flexibilityPreference: Int!
  renewableEnergyPreference: Int!
  supplierRatingPreference: Float!
  contractTypePreference: String
  earlyTerminationFeeTolerance: Int!
  maxMonthlyCost: Float
  maxAnnualCost: Float
  sustainabilityGoals: [String]
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type UsagePattern @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  patternId: ID!
  averageMonthlyKwh: Float!
  peakMonth: String!
  peakMonthKwh: Float!
  seasonalVariation: Float!
  usageTrend: String!
  peakUsageMonths: [String]!
  lowUsageMonths: [String]!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type RecommendationHistory @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  recommendationId: ID!
  planId: String!
  rank: Int!
  projectedSavings: Float!
  explanation: String!
  selected: Boolean!
  createdAt: AWSDateTime!
}

type Feedback @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  feedbackId: ID!
  recommendationId: String!
  rating: Int!
  accuracyRating: Int
  clarityRating: Int
  overallSatisfaction: Int
  comments: String
  createdAt: AWSDateTime!
}

type EnergyPlan @model @auth(rules: [{allow: private, operations: [read, create, update, delete]}])
{
  planId: String!
  supplierName: String!
  planName: String!
  ratePerKwh: Float!
  contractType: String!
  contractLengthMonths: Int
  renewablePercentage: Int
  earlyTerminationFee: Float
  supplierRating: Float
  state: String!
  utilityTerritory: String
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type CurrentPlan @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  supplierName: String!
  planName: String
  contractStartDate: String
  contractEndDate: String
  earlyTerminationFee: Float
  contractType: String
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type CustomerUsageData @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  usageDataId: ID!
  usagePoints: AWSJSON!
  totalAnnualKwh: Float
  averageMonthlyKwh: Float
  peakMonthKwh: Float
  peakMonth: String
  billingInfo: AWSJSON
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type UserProfile @model @auth(rules: [{allow: owner, ownerField: "owner"}])
{
  userId: ID!
  state: String
  address: AWSJSON
  useCustomAverages: Boolean
  customAverageKwh: Float
  customAverageCost: Float
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}